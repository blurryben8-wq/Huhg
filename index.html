<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>PIMPING - Memecoin Radar</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
<style>
body{margin:0;background:#0b0f1a;color:#e6ebff;font-family:'Inter',sans-serif;}
header{padding:18px 24px;background:linear-gradient(90deg,#ff4fb5,#4f8cff);display:flex;justify-content:space-between;align-items:center;}
header h1{margin:0;font-size:22px;}
.topbar{padding:15px 20px;display:flex;gap:10px;flex-wrap:wrap;background:#12172b;align-items:center;}
.search input{flex:1;padding:10px;border-radius:8px;border:none;background:#171d36;color:#e6ebff;}
button{background:#171d36;color:#e6ebff;border:none;padding:10px;border-radius:8px;cursor:pointer;transition:.2s;}
button.active{background:#4f8cff;color:#fff;}
.grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:15px;padding:20px;}
.card{background:#171d36;padding:15px;border-radius:12px;position:relative;display:flex;flex-direction:column;gap:6px;transition:.2s;}
.card:hover{transform:translateY(-4px);}
.token{font-size:18px;font-weight:600;display:flex;align-items:center;gap:10px;}
.token img{width:32px;height:32px;border-radius:50%;}
.muted{font-size:13px;color:#9aa4d6;}
.stat{font-size:14px;}
a{color:#4f8cff;text-decoration:none;}
.badge{display:inline-block;padding:2px 6px;border-radius:6px;font-size:11px;font-weight:600;margin-left:6px;}
.badge.green{background:#2ecc71;}
.badge.yellow{background:#f1c40f;color:#000;}
.badge.red{background:#e74c3c;}
.favorite{position:absolute;top:12px;right:12px;font-size:18px;cursor:pointer;color:#9aa4d6;}
.favorite.active{color:#ff4fb5;}
</style>
</head>
<body>

<header>
<h1>PIMPING</h1>
<div id="stats">Loading...</div>
</header>

<div class="topbar">
<input type="text" id="search" placeholder="Search memecoins (doge, shib...)">
<button onclick="runSearch()">Search</button>
<button class="filter-btn" onclick="setTimeFilter('1h')">üïê 1h</button>
<button class="filter-btn" onclick="setTimeFilter('6h')">6h</button>
<button class="filter-btn" onclick="setTimeFilter('24h')">24h</button>
<button onclick="refresh()">üîÑ Refresh</button>
</div>

<div class="grid" id="grid"></div>

<script>
const grid = document.getElementById('grid');
const stats = document.getElementById('stats');
const searchInput = document.getElementById('search');

let currentData = [];
let timeFilter = '24h';
const favorites = JSON.parse(localStorage.getItem('favorites')||'[]');

async function fetchPairs(query=''){
    stats.innerText = 'Fetching data‚Ä¶';
    try{
        const res = await fetch(`https://api.dexscreener.com/latest/dex/search?q=${encodeURIComponent(query)}`);
        const json = await res.json();
        const now = Date.now()/1000;
        const pairs = (json.pairs||[]).map(p=>{
            p.ageHours = (now - p.pairCreatedAt)/3600;
            return p;
        });
        return pairs;
    }catch(e){console.error(e); return [];}
}

function getRiskBadge(p){
    if(p.liquidity.usd<5000 || p.ageHours<0.25) return '<span class="badge red">High Risk</span>';
    if(p.liquidity.usd<20000) return '<span class="badge yellow">Medium</span>';
    return '<span class="badge green">Safe</span>';
}

function render(pairs){
    const q = searchInput.value.toLowerCase();
    const filtered = pairs.filter(p=>{
        let timeOk = true;
        if(timeFilter==='1h') timeOk = p.ageHours<=1;
        if(timeFilter==='6h') timeOk = p.ageHours<=6;
        return timeOk && 
        (p.baseToken.name.toLowerCase().includes(q) || p.baseToken.symbol.toLowerCase().includes(q));
    });

    grid.innerHTML = '';
    stats.innerText = `Showing ${filtered.length} results`;

    if(!filtered.length){
        grid.innerHTML = `<div style="color:#9aa4d6;font-size:18px;">No results found</div>`;
        return;
    }

    filtered.forEach(p=>{
        const card = document.createElement('div');
        card.className = 'card';
        const logo = p.baseToken.logo||'https://via.placeholder.com/32';
        const favActive = favorites.includes(p.pairAddress)?'active':'';
        card.innerHTML = `
        <div class="favorite ${favActive}" onclick="toggleFavorite('${p.pairAddress}', this)">‚≠ê</div>
        <div class="token"><img src="${logo}" alt="${p.baseToken.symbol}">${p.baseToken.name} (${p.baseToken.symbol}) ${getRiskBadge(p)}</div>
        <div class="muted">${p.dexId.toUpperCase()} ‚Ä¢ ${p.chainId}</div>
        <div class="stat">Price: $${Number(p.priceUsd).toFixed(6)}</div>
        <div class="stat">Volume 24h: $${p.volume.h24.toLocaleString()}</div>
        <div class="stat">Liquidity: $${p.liquidity.usd.toLocaleString()}</div>
        <div class="stat">Age: ${p.ageHours.toFixed(2)}h</div>
        <div class="stat"><a href="${p.url}" target="_blank">View Chart ‚Üí</a></div>`;
        grid.appendChild(card);
    });
}

function toggleFavorite(addr, el){
    if(favorites.includes(addr)){
        favorites.splice(favorites.indexOf(addr),1);
        el.classList.remove('active');
    } else {
        favorites.push(addr);
        el.classList.add('active');
    }
    localStorage.setItem('favorites',JSON.stringify(favorites));
}

function setTimeFilter(tf){timeFilter=tf;render(currentData);}
async function runSearch(){currentData = await fetchPairs(searchInput.value.trim()); render(currentData);}
async function refresh(){currentData = await fetchPairs(searchInput.value.trim()); render(currentData);}

// Auto refresh every 60s
setInterval(()=>refresh(),60000);

// Init
runSearch();
</script>

</body>
</html>
